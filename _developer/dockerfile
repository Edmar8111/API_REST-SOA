# Imagem base oficial do Python (leve e estável)
FROM python:3.12-slim

# Define o diretório de trabalho dentro do container
WORKDIR /_developer

# Evita criação de arquivos .pyc e ativa logs imediatos
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# Copia o arquivo de dependências primeiro (boa prática para cache)
COPY requirements.txt .

# Instala dependências do projeto
RUN pip install --no-cache-dir -r requirements.txt

# Copia todo o código da aplicação para o container
COPY . .

# Expõe a porta padrão do Uvicorn
EXPOSE 8000

# Comando EXATO solicitado para iniciar a aplicação ASGI
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
